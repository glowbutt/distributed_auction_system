syntax = "proto3";
option go_package = "distributed_auction_system/grpc/proto";

message Empty {}

message Bid {
  // timestamp?
  int64 id = 1;
  int64 amount = 2;
}

message ClientDetails {
  int64 id = 1;
}

// Returns bid result, either "Success" or "Failure". Otherwise, if the auction is over, should return the winning bid
message Result {
  string result = 1;
}

message Port {
  int64 port = 1;
}


// For simplicity and data consistency, we always read and write from the Leader server. If this gets overloaded and crashes, we move to a new Leader.
service AuctionService {
  rpc sendBid (Bid) returns (Result) {}
  rpc sendQuery (ClientDetails) returns (Result) {}
  rpc receivePort (Empty) returns (Port) {}
}